# AGENTS.md ヒアリングチェックリスト

## 目的

AGENTS.md はエージェントの行動境界を固定する「常時参照される仕様書」として扱う。冗長化を避けつつ、迷いやすい判断を先に定義する。
詳細な実行手順は Playbook 側に寄せ、AGENTS.md では「何を守るか」と「どの Playbook を使うか」を明確にする。

## ヒアリング方針

- 質問は 1〜3 問ずつ出す。
- 先に必須項目を確定し、任意項目は後段で確認する。
- 回答を即時に要約して合意を取ってから次へ進む。

## 必須項目（先に確定）

1. プロジェクト概要
- プロジェクト名
- 一行説明
- Python バージョン（既定: 3.12+）
- パッケージ名（既定: プロジェクト名の snake_case）

2. 参照ドキュメントの配置
- タスク設計ディレクトリ（既定: `docs/task-designs`、既存 `docs/tasks` は後方互換で許容）
- API ドキュメント配置（既定: `docs/api`）
- ルール文書配置（既定: `docs/rules`）

3. 作業ルール
- タスク設計ゲートの有無（既定: 必須）
- 進捗管理方法（タスクリスト更新の要否）
- ドキュメント差分確認対象（README/AGENTS/docs）

4. Git 運用
- Worktree 運用の有無（既定: 有効）
- コミットメッセージ規約（既定: 日本語 + prefix）

5. 環境変数運用
- `.env.development` / `.env.production` の採用
- dotenvx での暗号化管理を有効にするか（既定: 有効）

6. Playbook 配置方針（再現性）
- 新規開始を Playbook 同梱テンプレートリポジトリにするか（既定: する）
- 空リポジトリ時のみグローバル bootstrap を初回1回だけ許容するか（既定: 許容する）
- 初回生成後に `<repo>/docs/ai/canonical/playbooks/` を正本化するか（既定: 正本化する）

7. プロダクト方針（docs/product）
- `docs/product/vision.md` で対象ユーザー・課題・成功状態を初期確定するか（既定: 初期確定する）
- `docs/product/goals.md` を「ユーザー到達状態ゴール」で定義するか（既定: 定義する）
- `docs/product/progress.md` を `%` ではなく「やるべきこと一覧」で管理するか（既定: 管理する）

## 任意項目（必要時のみ）

- フロントエンド併設の有無
- 追加の静的解析ツール
- PR テンプレートの必須項目
- 特定業界向けのセキュリティ要件

## 対話テンプレート（そのまま使える）

### ラウンド1（最優先）

- プロジェクト名と一行説明を教えてください。
- Python バージョンは `3.12+` で問題ありませんか。
- タスク設計の保存先は `docs/task-designs` で進めて問題ありませんか（既存資産が `docs/tasks` の場合はそのまま踏襲しますか）。

### ラウンド2（運用固定）

- Git Worktree 運用を有効化しますか（既定: 有効）。
- コミットメッセージを「prefix + 日本語、50文字以内」にしますか。
- CI は `python-uv-ci-setup` で必須設定として進めてよいですか。

### ラウンド3（環境変数）

- `.env.development` / `.env.production` 運用で進めてよいですか。
- dotenvx 暗号化を標準にしますか。
- 公開鍵 `DOTENV_PUBLIC_KEY_<ENV>` は後でユーザー提供値に差し替える前提でよいですか。

### ラウンド4（再現性）

- 新規開始は Playbook 同梱テンプレートリポジトリで進めますか。
- 空リポジトリ時のみ、グローバル `python-project-bootstrap` を初回1回だけ使う運用でよいですか。
- 生成後は `<repo>/docs/ai/canonical/playbooks/` を正本に固定してよいですか。

### ラウンド5（プロダクト方針）

- 開発開始前に `docs/product/vision.md` の対象ユーザー・課題・成功状態を確定してよいですか。
- `docs/product/goals.md` は期限ではなく「ユーザー到達状態」で定義してよいですか。
- `docs/product/progress.md` は `%` ではなく「やるべきこと一覧（完了済み/未完了/現在地）」で運用してよいですか。

## AGENTS.md 反映チェック

- 「参照すべきドキュメント」が相対パスで明示されている。
- SOLID/DRY/ヘキサゴナル参照先が記載されている。
- タスク設計ゲートの手順が記載されている。
- CI 必須と `python-uv-ci-setup` 利用が記載されている。
- コミュニケーション言語（日本語）が記載されている。
- 長いコマンド列は AGENTS.md ではなく Playbook に配置されている。
- 共有必須 Playbook の配置方針（repo 配下優先）が記載されている。
- 「初回のみグローバル、以後ローカル正本」の例外ルールが記載されている。
- `docs/product/*.md` の初期確定方針が記載されている。
